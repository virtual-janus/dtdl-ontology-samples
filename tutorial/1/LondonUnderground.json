[
  {
    "@id": "dtmi:uk:tfl:LondonUndergroundNetwork;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "London Underground Network",
    "contents": [
      { "@type": "Relationship", "name": "hasLine", "target": "dtmi:uk:tfl:TubeLine;1" },
      { "@type": "Relationship", "name": "hasStation", "target": "dtmi:uk:tfl:Station;1" },
      { "@type": "Relationship", "name": "operatedBy", "target": "dtmi:uk:tfl:TransportOperator;1" },
      { "@type": "Relationship", "name": "hasTrain", "target": "dtmi:uk:tfl:Train;1" },
      {
        "@type": "Telemetry",
        "name": "networkHealth",
        "schema": "string",
        "description": "High-level operational status of the entire network."
      }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:TubeLine;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Tube Line",
    "contents": [
      { "@type": "Property", "name": "lineId", "schema": "string" },
      { "@type": "Property", "name": "name", "schema": "string" },
      { "@type": "Property", "name": "colorHex", "schema": "string" },

      { "@type": "Relationship", "name": "servesStation", "target": "dtmi:uk:tfl:Station;1" },
      { "@type": "Relationship", "name": "operatedBy", "target": "dtmi:uk:tfl:TransportOperator;1" },
      { "@type": "Relationship", "name": "hasService", "target": "dtmi:uk:tfl:Service;1" },
      { "@type": "Relationship", "name": "affectedBy", "target": "dtmi:uk:tfl:Disruption;1" },
      { "@type": "Relationship", "name": "hasTrackSegment", "target": "dtmi:uk:tfl:TrackSegment;1" },

      {
        "@type": "Telemetry",
        "name": "lineStatus",
        "schema": "string",
        "description": "Real-time line status, e.g. Good Service, Minor Delays."
      },
      {
        "@type": "Telemetry",
        "name": "averageHeadwayMinutes",
        "schema": "double",
        "description": "Real-time average spacing between trains on this line."
      }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:Station;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Station",
    "contents": [
      { "@type": "Property", "name": "stationId", "schema": "string" },
      { "@type": "Property", "name": "name", "schema": "string" },
      { "@type": "Property", "name": "latitude", "schema": "double" },
      { "@type": "Property", "name": "longitude", "schema": "double" },

      { "@type": "Relationship", "name": "servedBy", "target": "dtmi:uk:tfl:TubeLine;1" },
      { "@type": "Relationship", "name": "connectedTo", "target": "dtmi:uk:tfl:Station;1" },
      { "@type": "Relationship", "name": "hasAccessibilityFeature", "target": "dtmi:uk:tfl:AccessibilityFeature;1" },
      { "@type": "Relationship", "name": "affectedBy", "target": "dtmi:uk:tfl:Disruption;1" },

      {
        "@type": "Telemetry",
        "name": "crowdingLevel",
        "schema": "string",
        "description": "Low, Medium, High, based on passenger density."
      },
      {
        "@type": "Telemetry",
        "name": "livePassengerCount",
        "schema": "integer",
        "description": "Real-time estimated number of passengers in the station."
      }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:TransportOperator;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Transport Operator",
    "contents": [
      { "@type": "Property", "name": "operatorId", "schema": "string" },
      { "@type": "Property", "name": "name", "schema": "string" },
      { "@type": "Relationship", "name": "operatesLine", "target": "dtmi:uk:tfl:TubeLine;1" },
      { "@type": "Relationship", "name": "operatesService", "target": "dtmi:uk:tfl:Service;1" }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:AccessibilityFeature;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Accessibility Feature",
    "contents": [
      { "@type": "Property", "name": "featureType", "schema": "string" },
      { "@type": "Property", "name": "description", "schema": "string" },

      { "@type": "Relationship", "name": "locatedAt", "target": "dtmi:uk:tfl:Station;1" }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:Route;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Route",
    "contents": [
      { "@type": "Property", "name": "routeId", "schema": "string" },
      { "@type": "Property", "name": "name", "schema": "string" },

      {
        "@type": "Relationship",
        "name": "includesStation",
        "target": "dtmi:uk:tfl:Station;1",
        "properties": [
          { "@type": "Property", "name": "order", "schema": "integer" }
        ]
      },
      { "@type": "Relationship", "name": "usesSegment", "target": "dtmi:uk:tfl:TrackSegment;1" }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:Service;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Service",
    "contents": [
      { "@type": "Property", "name": "serviceId", "schema": "string" },
      { "@type": "Property", "name": "startTime", "schema": "string" },
      { "@type": "Property", "name": "endTime", "schema": "string" },

      { "@type": "Relationship", "name": "operatesOnLine", "target": "dtmi:uk:tfl:TubeLine;1" },
      { "@type": "Relationship", "name": "followsRoute", "target": "dtmi:uk:tfl:Route;1" },
      { "@type": "Relationship", "name": "operatedBy", "target": "dtmi:uk:tfl:TransportOperator;1" },

      {
        "@type": "Telemetry",
        "name": "delayMinutes",
        "schema": "double",
        "description": "Real-time delay affecting the service."
      },
      {
        "@type": "Telemetry",
        "name": "activeTrainCount",
        "schema": "integer",
        "description": "Number of trains currently active on this service."
      }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:TrackSegment;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Track Segment",
    "contents": [
      { "@type": "Property", "name": "segmentId", "schema": "string" },
      { "@type": "Property", "name": "distanceMeters", "schema": "double" },

      { "@type": "Relationship", "name": "fromStation", "target": "dtmi:uk:tfl:Station;1" },
      { "@type": "Relationship", "name": "toStation", "target": "dtmi:uk:tfl:Station;1" },
      { "@type": "Relationship", "name": "partOfLine", "target": "dtmi:uk:tfl:TubeLine;1" },

      {
        "@type": "Telemetry",
        "name": "travelTimeSeconds",
        "schema": "integer",
        "description": "Real-time estimated travel time along this track segment."
      }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:Disruption;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Disruption",
    "contents": [
      { "@type": "Property", "name": "disruptionId", "schema": "string" },
      { "@type": "Property", "name": "description", "schema": "string" },
      { "@type": "Property", "name": "severity", "schema": "string" },
      { "@type": "Property", "name": "startTime", "schema": "string" },
      { "@type": "Property", "name": "endTime", "schema": "string" },

      { "@type": "Relationship", "name": "affectsLine", "target": "dtmi:uk:tfl:TubeLine;1" },
      { "@type": "Relationship", "name": "affectsStation", "target": "dtmi:uk:tfl:Station;1" },
      { "@type": "Relationship", "name": "affectsService", "target": "dtmi:uk:tfl:Service;1" }
    ]
  },

  {
    "@id": "dtmi:uk:tfl:Train;1",
    "@type": "Interface",
    "@context": "dtmi:dtdl:context;3",
    "displayName": "Train",
    "contents": [
      { "@type": "Property", "name": "trainId", "schema": "string" },
      { "@type": "Property", "name": "rollingStockClass", "schema": "string" },

      { "@type": "Relationship", "name": "assignedToService", "target": "dtmi:uk:tfl:Service;1" },
      { "@type": "Relationship", "name": "affectedBy", "target": "dtmi:uk:tfl:Disruption;1" },

      {
        "@type": "Telemetry",
        "name": "location",
        "schema": {
          "@type": "Object",
          "fields": [
            { "name": "latitude", "schema": "double" },
            { "name": "longitude", "schema": "double" }
          ]
        }
      },
      {
        "@type": "Telemetry",
        "name": "speedKmh",
        "schema": "double",
        "description": "Real-time speed of the train."
      },
      {
        "@type": "Telemetry",
        "name": "occupancyLevel",
        "schema": "string",
        "description": "Low, Medium, High, VeryHigh."
      }
    ]
  }
]
